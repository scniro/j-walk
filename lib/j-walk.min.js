function jwException(e){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e}function jwHelper(){function e(e,r){function t(e,r,n,i){var o=r.shift();return o&&r.length>0?(e[o.property]=o.isArray?[]:{},t(e[o.property],r,n,i)):o&&(e[o.property]=n),e}return t({},e.undefined,r,e.queryProperties)}function r(e,r){var t=[];return e.slice(r.length,e.length).forEach(function(e){t.push({property:e,isArray:!1,value:null})}),{queryProperties:{},undefined:t}}function t(e){if(!e||"string"!=typeof e)throw new jwException("j-walk: invalid selector query format. expected: string");for(var r=e.split("."),t=/\[(.*?)\]/,n=0;n<r.length;n+=1)if(r[n].match(t)){var i=r[n].split(t).filter(function(e){return""!==e});r[n]=i}return r||[]}return{constructNestedObject:e,getNestedMapping:r,parseQuery:t}}function jw(e){function r(e,r){function t(e){var r=n.shift();if(e.hasOwnProperty(r)&&n.length>0)t(e[r]);else{if(!Array.isArray(e))return i=e.hasOwnProperty(r);for(var o=n.shift(),s=r[0].split("=")[0],u=r[0].split("=")[1],a=0;a<e.length;a+=1)if(e[a][s]==u)return o?n.length>0?t(e[a][o]):i=e[a].hasOwnProperty(o):i=!0}}var n=engine.parseQuery(r),i=!1;return t(e),i}function t(e,r){function t(e){var r=i.shift();if(!Array.isArray(r))return e.hasOwnProperty(r)&&i.length>0?t(e[r]):n=e[r];for(var o=i.shift(),s=r[0].split("=")[0],u=r[0].split("=")[1],a=0;a<e.length;a+=1)if(e[a][s]==u)return i.length>0?t(e[a][o]):n=e[a][o]}var n,i=engine.parseQuery(r);return t(e),n}function n(e,r,t){function n(e,t){var s=i.shift();if(e.hasOwnProperty(s)&&!Array.isArray(e)&&i.length>0)o.push(s),0!==i.length&&n(e[s],t);else if(Array.isArray(e))for(var u=s[0].split("=")[0],a=s[0].split("=")[1],p=0;p<e.length;p+=1){var f=!1;if(e[p][u]==a){f=!0;var c;if("object"==typeof t&&(c=Object.keys(t)),0!==i.length)return o.push(s),n(e[p],t);for(var l=0;l<c.length;l+=1)e[p][c[l]]=t[c[l]]}}else{var h=engine.getNestedMapping(engine.parseQuery(r),o),y=engine.constructNestedObject(h,t);y&&(e[s]=y[s])}}var i=engine.parseQuery(r),o=[];n(e,t)}if(!e||"object"!=typeof e)throw new jwException("j-walk: invalid selector. expected: object");var i=this;return i.exists=function(t){return r(e,t)},i.get=function(r){return t(e,r)},i.set=function(r,t){return n(e,r,t)},i}var engine=new jwHelper;"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=jw,module.exports.jwHelper=jwHelper,module.exports.jwException=jwException),"undefined"!=typeof window&&(window.jw=jw);